#!/bin/bash

echo "=========" 

current_branch=$(git symbolic-ref --short HEAD)
committer=$(git log -1 --format='%an')
pattern="*/$committer/*"

echo "$committer 이 접근."

if [[ $committer == "ahhjm881" || $committer == "gabjuho" ]]; then
	echo "어드민 접근 권한 사용."
	exit 0
fi

if [[ $current_branch == $pattern ]]; then
	echo "권한 일치"
	exit 1
else
	echo "해당 브랜치 조작 권한 없음."
	echo "브랜치의 이름이 아래 양식과 같은지 확인하시오"
	echo "예) feature/$committer/**"
	exit 1
fi